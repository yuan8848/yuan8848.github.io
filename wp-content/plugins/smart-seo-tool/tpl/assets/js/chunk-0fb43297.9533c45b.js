(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0fb43297"],{"6a8c":function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"6bd9":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mt"},[n("table",{staticClass:"wbs-form-table"},[n("tbody",[n("tr",[n("th",{staticClass:"row w8em"}),n("td",[n("el-button",{attrs:{size:"medium",type:"primary",plain:"",icon:"el-icon-collection"},on:{click:function(e){t.unfold=!t.unfold}}},[t._v("变量注释")]),n("table",{directives:[{name:"show",rawName:"v-show",value:t.unfold,expression:"unfold"}],staticClass:"wbs-table wbs-table-doc table-hover mt"},[t._m(0),n("tbody",t._l(t.doc_items,(function(e){return n("tr",{key:e.name},[n("td",[n("b",[t._v(t._s(e.name))])]),n("td",{domProps:{innerHTML:t._s(e.desc)}})])})),0)]),t._m(1)],1)])])])])},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("td",[t._v("变量名称")]),n("td",[t._v("变量说明")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"description mt"},[t._v(" SEO本身不是一件容易的事情，但当您深入了解其中的所有要点，也没有想象中那么深奥。"),n("br"),t._v("阅读"),n("a",{attrs:{href:"https://www.wbolt.com/learn/wp-seo",target:"_blank",rel:"noopener noreferrer nofollow"}},[t._v("WordPress SEO相关文章")]),t._v("(特别是"),n("a",{attrs:{href:"https://www.wbolt.com/wordpress-seo-tips.html",target:"_blank",rel:"noopener noreferrer nofollow"}},[t._v("WordPress终极SEO优化方案")]),t._v(")，并逐一摸透，相信您最终有所收获。 ")])}],o=n("365c"),r={name:"comVariableDoc",props:{type:{type:String,value:""}},data:function(){return{doc_items:[],unfold:!1}},created:function(){var t=this,e="WB_SST_DOC"+(t.type?"_"+t.type:""),n=localStorage.getItem(e);n=n?JSON.parse(n):null,n&&n.ver==t.$cnf.pd_version?t.doc_items=n.data:Object(o["b"])({action:t.$cnf.action.act,op:"doc",type:t.type?t.type:""}).then((function(n){t.doc_items=n["data"],localStorage.setItem(e,JSON.stringify({ver:t.$cnf.pd_version,data:n["data"]}))}))}},c=r,s=n("5d22"),l=Object(s["a"])(c,a,i,!1,null,null,null);e["a"]=l.exports},"9cda":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"wp",staticClass:"wbs-tag-format"},[t.cnf.variableOnly?t._e():n("span",{staticClass:"el-dropdown-link",on:{click:function(e){return e.stopPropagation(),t.inset_item()}}},[n("i",{staticClass:"el-icon-circle-plus el-icon--right"}),t._v(" "),n("span",{staticClass:"label-inset-var"},[t._v("插入变量")])]),n("div",{staticClass:"input-box",class:{"is-focus":t.isFocus}},[t.cnf.variableOnly?n("div",[t._l(t.item_list,(function(e,a){return n("tag-variable-item",{key:a,ref:"tagItem",refInFor:!0,attrs:{opt:e,cnf:t.cnf},on:{del:function(e){return t.del_item(a,e)}}})})),n("span",{staticClass:"input-item-btn",on:{click:function(e){return e.stopPropagation(),t.inset_tag()}}},[n("i",{staticClass:"el-icon-circle-plus el-icon--right"}),t._v(" "),n("span",{staticClass:"label-inset-var"},[t._v("插入变量")])])],2):n("div",t._l(t.item_list,(function(e,a){return n("tag-item",{key:a,ref:"tagItem",refInFor:!0,class:{"last-item":a==t.items.length-1},attrs:{opt:e,cnf:t.cnf},on:{focus:function(e){return t.get_focus(a)},blur:t.blur_handler,change:function(e){return t.tag_change(a,e)},add:function(e){return t.inset_item(a)},del:function(e){return t.del_item(a,e)},"active-next":function(e){return t.active_next(a,e)}}})})),1),n("ul",{directives:[{name:"show",rawName:"v-show",value:t.dropdown_active,expression:"dropdown_active"}],ref:"dropdownList",staticClass:"el-dropdown-menu el-popper"},t._l(t.cnf.dropdownItems,(function(e,a){return n("li",{key:a,staticClass:"el-dropdown-menu__item",on:{click:function(n){return t.select_dropdown_value(e,a)}}},[t._v(t._s(e))])})),0),t.cnf.variableOnly?t._e():n("div",{staticClass:"inner-mask",on:{click:t.focus_wp}})])])},i=[],o=(n("fc13"),n("9b5f"),n("62f9"),n("3bae"),n("ea94"),n("bf2f"),n("5b12"),n("5d08"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ib input-item",class:t.locked?"tag-ib":"",on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"])?null:t.del_tag_ib(e)},input:t.tag_wp_input,click:function(e){return e.stopPropagation(),t.$emit("focus")}}},[n("span",{directives:[{name:"show",rawName:"v-show",value:t.locked,expression:"locked"}],ref:"displayValue",staticClass:"display-value",on:{click:t.select}},[t._v(t._s(t.opt.name))]),t.locked?t._e():n("span",{staticClass:"between-tag-input",attrs:{contenteditable:"true"},domProps:{innerHTML:t._s(t.opt.value)},on:{blur:function(e){return t.input_action(e)},focus:function(e){return t.$emit("focus")},input:function(e){return t.div_input(e)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"])?null:t.div_keydown(e)},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.div_enter(e)}}})])}),r=[],c={name:"comTagItem",props:{opt:""},data:function(){var t=this;return{tag_ib_html:"",value:t.opt.value,del_action:0}},created:function(){},mounted:function(){var t=this;t.tag_ib_html=t.$refs.displayValue.outerHTML},methods:{input_action:function(t){var e=this,n=t.target.innerText;e.opt.value=n,e.$emit("change",{name:n,value:n,type:0}),e.$emit("blur",n)},div_keydown:function(t){var e=this,n=e.value;""===n&&(e.del_action>0?(e.$emit("del",-1),e.del_action=0):(e.del_action++,e.$emit("change",{name:"",value:"",type:0})))},div_enter:function(t){return t.preventDefault(),!1},div_input:function(t){var e=this,n=t.target.innerText;if("%"==n)return e.$emit("add",!0),!1;n.replace(/%/,"&#x25;"),e.value=t.target.innerText},tag_wp_input:function(t){var e=this;e.locked&&(t.target.innerHTML=e.tag_ib_html,e.$emit("active-next",t.data))},select:function(t){var e=window.getSelection(),n=document.createRange();e.removeAllRanges(),n.selectNodeContents(t.currentTarget),e.addRange(n)},del_tag_ib:function(t){this.$emit("del",0)}},computed:{locked:function(){return this.opt.type}}},s=c,l=n("5d22"),u=Object(l["a"])(s,o,r,!1,null,null,null),d=u.exports,p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ib tag-item",class:t.locked?"tag-ib":"",on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"])?null:t.del_tag_ib(e)},input:t.tag_wp_input,click:function(e){return e.stopPropagation(),t.$emit("focus")}}},[n("span",{directives:[{name:"show",rawName:"v-show",value:t.locked,expression:"locked"}],ref:"displayValue",staticClass:"display-value",on:{click:t.select}},[t._v(t._s(t.opt.name))]),n("i",{staticClass:"del",on:{click:t.del_tag_ib}}),t.locked?t._e():n("span",{staticClass:"between-tag-readonly",domProps:{innerHTML:t._s(t.opt.value)},on:{blur:function(e){return t.input_action(e)},focus:function(e){return t.$emit("focus")},input:function(e){return t.div_input(e)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"])?null:t.div_keydown(e)},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.div_enter(e)}}})])},f=[],_={name:"comTagItemVariableOnly",props:{opt:""},data:function(){var t=this;return{tag_ib_html:"",value:t.opt.value,del_action:0}},created:function(){},mounted:function(){var t=this;t.tag_ib_html=t.$refs.displayValue.outerHTML},methods:{input_action:function(t){var e=this,n=t.target.innerText;e.opt.value=n,e.$emit("change",{name:n,value:n,type:0}),e.$emit("blur",n)},div_keydown:function(t){var e=this,n=e.value;""===n&&(e.del_action>0?(e.$emit("del",-1),e.del_action=0):(e.del_action++,e.$emit("change",{name:"",value:"",type:0})))},div_enter:function(t){return t.preventDefault(),!1},div_input:function(t){var e=this,n=t.target.innerText;if("%"==n)return e.$emit("add",!0),!1;n.replace(/%/,"&#x25;"),e.value=t.target.innerText},tag_wp_input:function(t){var e=this;e.locked&&(t.target.innerHTML=e.tag_ib_html,e.$emit("active-next",t.data))},select:function(t){var e=window.getSelection(),n=document.createRange();e.removeAllRanges(),n.selectNodeContents(t.currentTarget),e.addRange(n)},del_tag_ib:function(t){this.$emit("del",0)}},computed:{locked:function(){return this.opt.type}}},v=_,m=Object(l["a"])(v,p,f,!1,null,null,null),h=m.exports,g={name:"WBTagFormat",props:{opt:String,cnf:{type:Object,value:{dropdownItems:{},variableOnly:!1}}},components:{"tag-item":d,"tag-variable-item":h},data:function(){var t,e=this;return t=e.cnf.variableOnly?e.opt.replace(/,/g,""):e.opt,{empty_item:{name:"",value:"",type:0},cur_value:t,cur_index:0,had_add:0,dropdown_active:0,isFocus:0,cnf_keys:Object.keys(e.cnf.dropdownItems),item_list:[]}},created:function(){},mounted:function(){var t=this;t.$nextTick((function(){t.cur_index=t.item_list.length-1})),document.addEventListener("click",(function(e){t.dropdown_active&&t.hide_dropdown()}))},methods:{tag_change:function(t,e){var n=this,a=n.items,i="";null!=e&&(a[t]=e.value,a.forEach((function(t,e,n){var a=t.trim();a&&(i+=a)})),n.cur_value=i)},inset_item:function(t){var e=this,n=null!=t?t:e.cur_index;""!==e.item_list[n].value&&(n+=1,e.items.splice(n,0,"%"),e.item_list.splice(n,0,e.empty_item),e.cur_index=n),e.item_list[n].value="%",e.active_dropdown(n)},inset_tag:function(t){var e=this,n=null!=t?t:e.cur_index;e.item_list[n].value="",e.active_dropdown(n)},del_item:function(t,e){var n=this,a="",i=n.items,o=t+e;o=o>=0?o:0,n.item_list[o].type&&(i.forEach((function(t,e){o!==e&&(a+=t)})),n.cur_value=a,n.cur_index=o-1,n.set_focus(o))},active_dropdown:function(t){var e=this,n=null!==t?t:e.cur_index,a=e.$refs.tagItem.length-1,i=n>a?a:n,o=e.$refs.tagItem[i].$el.offsetLeft;e.dropdown_active=!0,e.$refs.dropdownList.style.left=o+"px",e.$refs.wp.classList.add("active-dropdown")},hide_dropdown:function(){var t=this;t.dropdown_active=!1,t.$refs.dropdownList.style.left="",t.$refs.wp.classList.remove("active-dropdown")},select_dropdown_value:function(t,e){var n=this,a="",i=n.items,o=n.cur_index;i[o]=e,i.forEach((function(t,e){a+=t})),n.cur_value=a,n.hide_dropdown(),n.$nextTick((function(){var t=n.items.length;n.cur_index=t-1,n.set_focus(t)}))},active_next:function(t,e){var n=this,a=t+1,i=n.$refs.tagItem[a].$el.querySelector(".between-tag-input"),o=i.innerText;i.innerText=e+o,i.focus();var r=window.getSelection();r.removeAllRanges();var c=document.createRange();c.setStart(i,1),r.addRange(c)},set_focus:function(t){var e=this,n=t>1?t-1:0,a=e.$refs.tagItem[n].$el,i=a.querySelector(".between-tag-input"),o=window.getSelection(),r=document.createRange();if(i){var c=i.innerText.length,s=c?i.firstChild:i;o.removeAllRanges(),r.setStart(s,c),r.setEnd(s,c)}else{var l=a.querySelector(".display-value");o.removeAllRanges(),l&&r.selectNode(l)}return o.addRange(r),!1},get_focus:function(t){this.cur_index=t,this.isFocus=!0},focus_wp:function(){var t=this,e=t.$refs.tagItem.length;t.cur_index=e-1,t.set_focus(e),t.isFocus=!0},blur_handler:function(t){var e=this;e.isFocus=!1}},computed:{items:function(){var t=this,e=t.cur_value;return e?(t.cnf.variableOnly&&(e=e.replace(/,/g,"")),e=e.replace(/(%\w+%)/g,"##$1##"),e=e.replace(/^##/g,""),e.split("##")):[]}},watch:{cur_value:{handler:function(t){var e=this,n=e.cnf.variableOnly?t.replace(/,/g,""):t,a=n;a=a.replace(/(%\w+%)/g,"##$1##"),a=a.replace(/^##/g,"");var i=[{name:"",value:"",type:0}],o=n?a.split("##"):[];o.forEach((function(t,n){var a=e.cnf_keys.indexOf(t)>-1?1:0;i[n]={name:a?e.cnf.dropdownItems[t]:t,value:t,type:a}})),i.slice(-1)[0].type&&i.push(e.empty_item),e.item_list=i,e.$emit("change",n)},immediate:!0},opt:{handler:function(t){var e=this;e.cur_value=t}}}},w=g,b=Object(l["a"])(w,a,i,!1,null,null,null);e["a"]=b.exports},ea94:function(t,e,n){"use strict";var a=n("1f04"),i=n("f8d5").trim,o=n("ed58");a({target:"String",proto:!0,forced:o("trim")},{trim:function(){return i(this)}})},ed58:function(t,e,n){var a=n("7ce6"),i=n("6a8c"),o="​᠎";t.exports=function(t){return a((function(){return!!i[t]()||o[t]()!=o||i[t].name!==t}))}},f8d5:function(t,e,n){var a=n("4023"),i=n("6a8c"),o="["+i+"]",r=RegExp("^"+o+o+"*"),c=RegExp(o+o+"*$"),s=function(t){return function(e){var n=String(a(e));return 1&t&&(n=n.replace(r,"")),2&t&&(n=n.replace(c,"")),n}};t.exports={start:s(1),end:s(2),trim:s(3)}},feec:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wbs-content"},[n("div",{staticClass:"wbs-content-inner"},[n("div",{staticClass:"wbs-main"},[t.is_loaded?n("table",{staticClass:"wbs-form-table"},[n("tbody",[n("tr",[n("th",{staticClass:"row w8em"},[t._v("图片优化开关")]),n("td",{staticClass:"info"},[n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.opt.active,expression:"opt.active"}],staticClass:"wb-switch",attrs:{type:"checkbox","true-value":"1","false-value":"0"},domProps:{checked:Array.isArray(t.opt.active)?t._i(t.opt.active,null)>-1:t._q(t.opt.active,"1")},on:{change:function(e){var n=t.opt.active,a=e.target,i=a.checked?"1":"0";if(Array.isArray(n)){var o=null,r=t._i(n,o);a.checked?r<0&&t.$set(t.opt,"active",n.concat([o])):r>-1&&t.$set(t.opt,"active",n.slice(0,r).concat(n.slice(r+1)))}else t.$set(t.opt,"active",i)}}})])])]),n("tr",[n("th",{staticClass:"row w8em",staticStyle:{width:"10em"}},[t._v("应用方式")]),n("td",[n("div",{staticClass:"selector-bar"},t._l(t.cnf.active_type,(function(e){return n("label",{key:e.val},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.opt.mode,expression:"opt.mode"}],staticClass:"wbs-radio",attrs:{type:"radio"},domProps:{value:e.val,checked:t._q(t.opt.mode,e.val)},on:{change:function(n){return t.$set(t.opt,"mode",e.val)}}}),t._v(" "+t._s(e.label))])})),0),n("p",{staticClass:"description"},[t._v(' "仅补充"即无ALT和Title时应用优化规则，"全覆盖"则全部应用优化规则。 ')])])]),n("tr",[n("th",{staticClass:"row"},[t._v("图片ALT&Title")]),n("td",[n("wbs-title-format",{attrs:{cnf:{dropdownItems:t.cnf.img_variables},opt:t.opt.content},on:{change:function(e){t.opt.content=e}}})],1)]),n("tr",[n("th",{staticClass:"row"},[t._v("特色图片ALT&Title")]),n("td",[n("wbs-title-format",{attrs:{cnf:{dropdownItems:t.cnf.img_variables},opt:t.opt.thumb},on:{change:function(e){t.opt.thumb=e}}})],1)]),t._m(0)])]):t._e(),n("wbs-var-doc",{directives:[{name:"show",rawName:"v-show",value:t.is_loaded,expression:"is_loaded"}],attrs:{type:"image"}})],1),t.is_pro?t._e():n("wbs-more-sources")],1),n("wbs-ctrl-bar",{on:{submit:t.update_data}})],1)},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",[n("th",[t._v("温馨提示")]),n("td",{staticClass:"info"},[n("ul",[n("li",[t._v(" 序号，即当post或者page存在多个图片时，以序号区分不同图片的alt和title ")])])])])}],o=(n("fc13"),n("9b5f"),n("9cda")),r=n("365c"),c=n("6bd9"),s={name:"ImageView",components:{"wbs-title-format":o["a"],"wbs-var-doc":c["a"]},data:function(){var t=this;return{form_changed:0,is_loaded:0,is_pro:t.$cnf.is_pro,opt:{},cnf:{}}},created:function(){var t=this;t.get_data()},methods:{get_data:function(){var t=this;Object(r["b"])({action:t.$cnf.action.act,op:"get_options",key:"img_seo"}).then((function(e){t.opt=e.data.opt,t.cnf=e.data.cnf,t.is_loaded=1}))},update_data:function(t){var e=this;Object(r["c"])({action:e.$cnf.action.act,op:"update_options",opt:e.opt,key:"img_seo"}).then((function(n){wbui.toast("设置保存成功"),e.form_changed=1,t&&t()}))},title_format:function(t){return t=t.replace(/(%\w+%)/g,",$1,"),t=t.replace(/,,/g,","),t=t.replace(/^,/g,""),t}},computed:{},watch:{opt:{handler:function(){this.form_changed++},deep:!0}},beforeRouteLeave:function(t,e,n){var a=this;a.form_changed>1?wbui.open({content:"您修改的设置尚未保存，确定离开此页面吗？",btn:["保存并离开","放弃修改"],yes:function(){return n(!1),a.update_data((function(){n()})),!1},no:function(){return n(),!1}}):n()}},l=s,u=n("5d22"),d=Object(u["a"])(l,a,i,!1,null,null,null);e["default"]=d.exports}}]);