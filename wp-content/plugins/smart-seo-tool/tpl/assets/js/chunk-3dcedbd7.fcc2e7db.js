(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3dcedbd7"],{"24a8":function(t,e,a){"use strict";var n=a("8fe5"),o=a("f14a"),s=a("dd95"),i=a("bbee"),r=a("2ccf"),c=a("36b2"),l=a("83d4"),u=a("3de9"),p=a("7ce6"),_=a("a447"),d=a("a34a").f,b=a("38e3").f,f=a("d320").f,v=a("f8d5").trim,m="Number",h=o[m],w=h.prototype,k=c(_(w))==m,y=function(t){var e,a,n,o,s,i,r,c,l=u(t,!1);if("string"==typeof l&&l.length>2)if(l=v(l),e=l.charCodeAt(0),43===e||45===e){if(a=l.charCodeAt(2),88===a||120===a)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+l}for(s=l.slice(2),i=s.length,r=0;r<i;r++)if(c=s.charCodeAt(r),c<48||c>o)return NaN;return parseInt(s,n)}return+l};if(s(m,!h(" 0o1")||!h("0b1")||h("+0x1"))){for(var g,C=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof C&&(k?p((function(){w.valueOf.call(a)})):c(a)!=m)?l(new h(y(e)),a,C):y(e)},A=n?d(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),x=0;A.length>x;x++)r(h,g=A[x])&&!r(C,g)&&f(C,g,b(h,g));C.prototype=w,w.constructor=C,i(o,m,C)}},6485:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wbs-content-inner"},[a("div",{staticClass:"wbs-main"},[t.is_loaded?a("div",{staticClass:"sc-body"},[a("table",{staticClass:"wbs-form-table"},[a("tbody",[a("tr",[a("th",{staticClass:"w8em"},[t._v("失效URL检测开启")]),a("td",{staticClass:"info"},[a("span",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.opt.active,expression:"opt.active"}],staticClass:"wb-switch",attrs:{type:"checkbox","true-value":"1","false-value":"0"},domProps:{checked:Array.isArray(t.opt.active)?t._i(t.opt.active,null)>-1:t._q(t.opt.active,"1")},on:{change:function(e){var a=t.opt.active,n=e.target,o=n.checked?"1":"0";if(Array.isArray(a)){var s=null,i=t._i(a,s);n.checked?i<0&&t.$set(t.opt,"active",a.concat([s])):i>-1&&t.$set(t.opt,"active",a.slice(0,i).concat(a.slice(i+1)))}else t.$set(t.opt,"active",o)}}})])])]),a("tr",[a("th",[t._v("检测频率")]),a("td",[a("div",{staticClass:"selector-bar"},t._l(t.cnf.test_rate,(function(e,n){return a("label",{key:e},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.opt.test_rate,expression:"opt.test_rate"}],attrs:{type:"radio"},domProps:{value:n,checked:t._q(t.opt.test_rate,n)},on:{change:function(e){return t.$set(t.opt,"test_rate",n)}}}),a("span",[t._v(t._s(e))])])})),0)])])]),a("tbody",{directives:[{name:"show",rawName:"v-show",value:t.viewAllOption,expression:"viewAllOption"}]},[a("tr",[a("th",[t._v("检测范围")]),a("td",[a("div",{staticClass:"selector-bar"},[a("div",{staticClass:"label"},[t._v("链接类型")]),t._l({out:"站外链接",in:"站内链接"},(function(e,n){return a("label",{key:n},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.opt.url_type,expression:"opt.url_type"}],attrs:{type:"checkbox"},domProps:{value:n,checked:Array.isArray(t.opt.url_type)?t._i(t.opt.url_type,n)>-1:t.opt.url_type},on:{change:function(e){var a=t.opt.url_type,o=e.target,s=!!o.checked;if(Array.isArray(a)){var i=n,r=t._i(a,i);o.checked?r<0&&t.$set(t.opt,"url_type",a.concat([i])):r>-1&&t.$set(t.opt,"url_type",a.slice(0,r).concat(a.slice(r+1)))}else t.$set(t.opt,"url_type",s)}}}),a("span",[t._v(t._s(e))])])}))],2),a("div",{staticClass:"selector-bar"},[a("div",{staticClass:"label"},[t._v("文章类型")]),t._l(t.post_types,(function(e,n){return a("label",{key:n},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.opt.post_type,expression:"opt.post_type"}],attrs:{type:"checkbox"},domProps:{value:n,checked:Array.isArray(t.opt.post_type)?t._i(t.opt.post_type,n)>-1:t.opt.post_type},on:{change:function(e){var a=t.opt.post_type,o=e.target,s=!!o.checked;if(Array.isArray(a)){var i=n,r=t._i(a,i);o.checked?r<0&&t.$set(t.opt,"post_type",a.concat([i])):r>-1&&t.$set(t.opt,"post_type",a.slice(0,r).concat(a.slice(r+1)))}else t.$set(t.opt,"post_type",s)}}}),a("span",[t._v(t._s(e.name))])])}))],2),a("div",{staticClass:"selector-bar mt"},[a("div",{staticClass:"label"},[t._v("文章状态")]),t._l(t.post_statuses,(function(e,n){return a("label",{key:n},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.opt.post_status,expression:"opt.post_status"}],attrs:{type:"checkbox"},domProps:{value:n,checked:Array.isArray(t.opt.post_status)?t._i(t.opt.post_status,n)>-1:t.opt.post_status},on:{change:function(e){var a=t.opt.post_status,o=e.target,s=!!o.checked;if(Array.isArray(a)){var i=n,r=t._i(a,i);o.checked?r<0&&t.$set(t.opt,"post_status",a.concat([i])):r>-1&&t.$set(t.opt,"post_status",a.slice(0,r).concat(a.slice(r+1)))}else t.$set(t.opt,"post_status",s)}}}),a("span",[t._v(t._s(e.name))])])}))],2)])]),a("tr",[a("th",[t._v("排除域名列表")]),a("td",[a("wbs-custom-links",{attrs:{items:t.opt.exclude,mode:1,placeholder:"例如：yourdomain.com"},on:{"set-tags":function(e){t.opt.exclude=e}}}),a("div",{staticClass:"description mt"},[t._v("*无需填写http(s)://协议头，仅填写主域名即可。如：yourdomain.com")])],1)]),t._e()])]),a("a",{staticClass:"wb-btn-more",class:t.viewAllOption?"unfold":"",on:{click:function(e){t.viewAllOption=!t.viewAllOption}}},[a("svg",{staticClass:"wb-icon",attrs:{id:"arrow-down",viewBox:"0 0 32 32",width:"100%",height:"100%"}},[a("path",{attrs:{d:"M15.839 19.568h-.002a1.43 1.43 0 0 1-1.017-.423L.391 4.7c-.261-.262-.422-.622-.422-1.021s.161-.76.422-1.021a1.44 1.44 0 0 1 2.04 0l13.408 13.423L29.247 2.658a1.443 1.443 0 0 1 2.04 2.042L16.859 19.145c-.26.261-.62.423-1.018.423h-.002z"}}),a("path",{attrs:{d:"M15.839 29.75h-.002a1.43 1.43 0 0 1-1.017-.423L.391 14.882c-.261-.262-.422-.622-.422-1.021s.161-.76.422-1.021a1.44 1.44 0 0 1 2.04 0l13.408 13.423L29.247 12.84a1.443 1.443 0 0 1 2.04 2.042L16.859 29.327c-.26.261-.62.423-1.018.423h-.002z"}})]),a("span",[t._v(t._s(t.viewAllOption?"收起":"展开")+"更多选项")])])]):t._e(),t._m(0),t.is_loaded?a("div",{staticClass:"sc-body log-box"},[a("div",{staticClass:"tab-nav",attrs:{id:"broken_url_type"}},[a("a",{staticClass:"tn-item",class:{current:0==t.type},on:{click:function(e){return t.switch_tab(0)}}},[t._v("全部 ("+t._s(t.total)+")")]),a("a",{staticClass:"tn-item",class:{current:1==t.type},on:{click:function(e){return t.switch_tab(1)}}},[t._v("异常 ("+t._s(t.broken_url_sum["error"])+")")]),a("a",{staticClass:"tn-item",class:{current:2==t.type},on:{click:function(e){return t.switch_tab(2)}}},[t._v("重定向 ("+t._s(t.broken_url_sum["redirect"])+")")]),a("a",{staticClass:"tn-item",class:{current:4==t.type},on:{click:function(e){return t.switch_tab(4)}}},[t._v("待检测 ("+t._s(t.broken_url_sum["check"])+")")])]),a("el-table",{staticClass:"wbs-table mt",staticStyle:{width:"100%"},attrs:{data:t.broken_url},on:{"selection-change":t.handle_selection_change}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:"URL","class-name":"w30"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticClass:"url",attrs:{"data-label":"URL",href:e.row.url,target:"_blank"}},[t._v(t._s(e.row.url))])]}}],null,!1,473107009)}),a("el-table-column",{attrs:{label:"状态","class-name":"w10"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{attrs:{"data-label":"状态"}},[a("span",[t._v(t._s(e.row.code))])])]}}],null,!1,3912049159)}),a("el-table-column",{attrs:{label:"文章","class-name":"w35"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{attrs:{"data-label":"文章"}},[a("span",[t._v(t._s(e.row.post_title))])])]}}],null,!1,1034503837)}),a("el-table-column",{attrs:{label:"操作",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{plain:"",size:"mini",type:"danger"},on:{click:function(a){return t.check_broken(e.row)}}},[t._v("重新检查")]),a("el-button",{attrs:{size:"mini",type:"success",plain:""},on:{click:function(a){return t.edit_post(e.row.edit_url)}}},[t._v("编辑文章")]),a("el-button",{attrs:{size:"mini",type:"success",plain:""},on:{click:function(a){return t.remove_broken(e.row,e.$index)}}},[t._v("取消链接")]),/^(4|5|e)/.test(e.row.code)?a("el-button",{attrs:{size:"mini",type:"success",plain:""},on:{click:function(a){return t.mark_broken_url(e.row)}}},[t._v("未失效")]):t._e()]}}],null,!1,149025980)})],1),a("table",{staticClass:"table wbs-table mt"},[t.total>0?a("tfoot",{attrs:{id:"broken_footer"}},[a("tr",[a("td",[a("el-select",{attrs:{size:"small",placeholder:"批量操作"},model:{value:t.batch_op,callback:function(e){t.batch_op=e},expression:"batch_op"}},[a("el-option",{attrs:{label:"重新检查",value:"update"}}),a("el-option",{attrs:{label:"取消链接",value:"cancel"}}),a("el-option",{attrs:{label:"未失效",value:"ok"}})],1),a("el-button",{staticClass:"ml-s",attrs:{type:"info",plain:"",size:"small"},on:{click:t.batch_apply}},[t._v("应用")])],1),a("td",{staticClass:"align-right"},[a("button",{staticClass:"button-primary",attrs:{type:"button"},on:{click:t.clear_broken_url}},[t._v("重新检测")])])])]):t._e()]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.broken_url.length>0,expression:"broken_url.length>0"}],staticClass:"btns-bar"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper","page-size":1*t.page_num,total:1*t.record_total},on:{"current-change":t.nav_page}})],1)],1):t._e(),t._m(1)]),t.is_pro?t._e():a("wbs-more-sources"),a("wbs-ctrl-bar",{on:{submit:t.update_data}})],1)},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h3",{staticClass:"sc-title-sub"},[a("span",[t._v("失效URL")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("dl",{staticClass:"description mt"},[a("dt",[t._v("温馨提示：")]),a("dd",[t._v("部分异常链接可能是国内无法访问该站点导致，建议将此类域添加至排除域名列表；")]),a("dd",[t._v("对应重定向链接，建议将该URL修改为最终URL；")]),a("dd",[t._v("部分服务器会拒绝系统检测访问，返回403或者503状态，此种情况无需理会。")])])}],s=(a("3bae"),a("4200"),a("bf2f"),a("365c")),i=a("8856"),r={name:"UrlBroken",components:{"wbs-custom-links":i["a"]},data:function(){var t=this;return{form_changed:0,is_loaded:0,is_pro:t.$cnf.is_pro,opt:{},cnf:{},type:0,offset:0,page:1,page_num:20,record_total:0,post_statuses:[],post_types:[],broken_url:[],total:0,broken_url_sum:{ok:0,error:0,redirect:0,check:0},batch_op:"",multipleSelection:[],viewAllOption:0}},created:function(){var t=this;t.get_data(),t.load_data()},methods:{get_data:function(){var t=this;Object(s["b"])({action:t.$cnf.action.act,op:"get_options",key:"url_broken"}).then((function(e){t.opt=e.data.opt,t.cnf=e.data.cnf,t.total=e.data.total,t.post_types=e.data.post_types,t.post_statuses=e.data.post_statuses,t.broken_url_sum=e.data.broken_url_sum,t.is_loaded=1}))},load_data:function(){var t=this;Object(s["a"])({action:t.$cnf.action.act,op:"broken_url",page:t.page,offset:t.offset,type:t.type}).then((function(e){t.broken_url=e.data,t.record_total=e.record_total,t.page_num=e.page_num}))},update_data:function(t){var e=this;Object(s["c"])({action:e.$cnf.action.act,op:"update_options",opt:e.opt,key:"broken"}).then((function(a){wbui.toast("设置保存成功"),e.form_changed=1,t&&t()}))},nav_page:function(t){this.page=t,this.load_data()},switch_tab:function(t){var e=this;e.type=t,e.page=1,e.load_data()},handle_selection_change:function(t){this.multipleSelection=t},edit_post:function(t){window.open(t)},batch_apply:function(){var t=this;if(!t.batch_op)return!1;if(t.multipleSelection.length<1)return wbui.toast("未选择项目"),!1;var e=[];if(t.multipleSelection.forEach((function(t){e.push(t.id)})),!(e.length<1))if("ok"==t.batch_op)wbui.confirm("所选链接确认设置为未失效？",(function(){var a=wbui.toast("执行中...",{time:180});Object(s["b"])({action:t.$cnf.action.act,op:"broken_url_batch",type:"ok",ids:e.join(",")}).then((function(e){wbui.close(a),wbui.toast("设置成功"),t.page=1,t.load_data()}))}));else if("update"==t.batch_op){var a=wbui.toast("检测中...",{time:180});wbui.confirm("确认重新检查所选链接？",(function(){Object(s["b"])({action:t.$cnf.action.act,op:"broken_url_batch",type:"update",ids:e.join(",")}).then((function(e){wbui.close(a),wbui.toast("检测完毕"),t.load_data()}))}))}else if("cancel"==t.batch_op){var n=wbui.toast("更新中...",{time:180});wbui.confirm("确认取消链接所选链接？",(function(){Object(s["b"])({action:t.$cnf.action.act,op:"broken_url_batch",type:"cancel",ids:e.join(",")}).then((function(e){wbui.close(n),wbui.toast("更新完毕"),t.load_data()}))}))}},clear_broken_url:function(){return wbui.confirm("确认重新检测所有URL？在下一检测周期检测所有URL。",(function(){Object(s["b"])({action:"wb_smart_seo_tool",op:"clear_broken_url"}).then((function(t){wbui.toast("URL状态重置成功，检测任务提交成功。"),vm.page=1,vm.load_data()}))})),!1},mark_broken_url:function(t){return wbui.confirm("确认标记为未失效？",(function(){Object(s["b"])({action:"wb_smart_seo_tool",op:"mark_broken_url",id:t.id}).then((function(t){wbui.toast("标记成功"),vm.load_data()}))})),!1},remove_broken:function(t,e){var a=this;return wbui.confirm("确认删除？",(function(){Object(s["b"])({action:"wb_smart_seo_tool",op:"remove_broken",id:t.id}).then((function(t){a.broken_url.splice(e,1),wbui.toast("已移除")}))})),!1},check_broken:function(t){return Object(s["b"])({action:"wb_smart_seo_tool",op:"check_broken",id:t.id}).then((function(e){t.code=e.data,wbui&&wbui.toast("检测结果为["+e.data+"]"),vm.load_data()})),!1}},watch:{opt:{handler:function(){this.form_changed++},deep:!0}},beforeRouteLeave:function(t,e,a){var n=this;n.form_changed>1?wbui.open({content:"您修改的设置尚未保存，确定离开此页面吗？",btn:["保存并离开","放弃修改"],yes:function(){return a(!1),n.update_data((function(){a()})),!1},no:function(){return a(),!1}}):a()}},c=r,l=a("5d22"),u=Object(l["a"])(c,n,o,!1,null,null,null);e["default"]=u.exports},"6a8c":function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"83d4":function(t,e,a){var n=a("97f5"),o=a("721d");t.exports=function(t,e,a){var s,i;return o&&"function"==typeof(s=e.constructor)&&s!==a&&n(i=s.prototype)&&i!==a.prototype&&o(t,i),t}},8856:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wbs-custom-links"},[a("label",{staticClass:"wb-links-input-box"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.cur_input,expression:"cur_input"}],staticClass:"wbs-input wbs-input-short",attrs:{type:"text",placeholder:t.placeholder},domProps:{value:t.cur_input},on:{keyup:t.wbTagInput,input:function(e){e.target.composing||(t.cur_input=e.target.value)}}}),a("a",{staticClass:"ml link",on:{click:t.wbTagPush}},[t._v("添加 +")])]),t.items.length?a("div",{staticClass:"links-items"},t._l(t.items,(function(e,n){return a("div",{key:n,staticClass:"link-item"},[a("span",{staticClass:"item-value",domProps:{innerHTML:t._s(t.displayFormat(e))}}),a("span",{staticClass:"del",attrs:{"data-del-val":e},on:{click:function(e){return t.delItem(n)}}},[a("i",{staticClass:"el-icon-delete"})])])})),0):t._e()])},o=[],s=(a("24a8"),a("fc13"),a("9b5f"),a("ea94"),a("bf2f"),{name:"comCustomLinks",props:{items:Array,mode:Number,placeholder:String},data:function(){return{cur_input:"",taglist:[],keycode:null}},created:function(){this.taglist=this.items?this.items:[]},methods:{wbTagInput:function(t){var e=this,a=t.keyCode;188===a&&(e.cur_input=e.cur_input.replace(/(^,)|(,$)/,"")),13===a&&(e.wbTagPush(),event.stopPropagation())},wbTagPush:function(t){var e=this;return""!=e.cur_input&&(e.taglist.indexOf(e.cur_input.trim())>-1?(wbui.toast("已存在"),e.cur_input="",!1):(e.taglist.push(e.cur_input),e.$emit("set-tags",e.taglist),e.cur_input="",!1))},delItem:function(t){var e=this;wbui.confirm("确认删除？",(function(){e.taglist.splice(t,1),e.$emit("set-tags",e.taglist),wbui.toast("已移除")}))},displayFormat:function(t){return t}}}),i=s,r=a("5d22"),c=Object(r["a"])(i,n,o,!1,null,null,null);e["a"]=c.exports},ea94:function(t,e,a){"use strict";var n=a("1f04"),o=a("f8d5").trim,s=a("ed58");n({target:"String",proto:!0,forced:s("trim")},{trim:function(){return o(this)}})},ed58:function(t,e,a){var n=a("7ce6"),o=a("6a8c"),s="​᠎";t.exports=function(t){return n((function(){return!!o[t]()||s[t]()!=s||o[t].name!==t}))}},f8d5:function(t,e,a){var n=a("4023"),o=a("6a8c"),s="["+o+"]",i=RegExp("^"+s+s+"*"),r=RegExp(s+s+"*$"),c=function(t){return function(e){var a=String(n(e));return 1&t&&(a=a.replace(i,"")),2&t&&(a=a.replace(r,"")),a}};t.exports={start:c(1),end:c(2),trim:c(3)}}}]);