(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6e290a67"],{"46d5":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wbs-title-format"},[n("table",{staticClass:"wbs-form-table"},[n("tbody",[n("tr",[n("th",{staticClass:"row w8em"},[t._v("标题")]),n("td",[n("div",{staticClass:"input-with-count"},[n("wbs-title-format",{attrs:{cnf:{dropdownItems:t.cnf.titleVariables},opt:t.tdk[0]},on:{change:t.title_handler}}),n("span",{staticClass:"count"})],1),n("p",{staticClass:"description"},[t._v("一般不超过30个中文字符。")])])]),n("tr",[n("th",[t._v("关键词")]),n("td",[t.cnf.kwMode?n("div",{staticClass:"input-with-count"},[n("wbs-kw-format",{attrs:{cnf:{dropdownItems:t.cnf.titleVariables,variableOnly:!0},opt:t.tdk[1]},on:{change:t.kw_handler}})],1):n("label",{staticClass:"input-with-count wb-tags-module"},[n("wbs-tags-module",{attrs:{tags:t.tdk[1]},on:{"set-tags":t.kw_cpt}})],1),n("p",{staticClass:"description"},[t._v("建议3-5个为宜，切勿进行关键词堆叠。")])])]),n("tr",[n("th",[t._v("描述")]),n("td",[n("div",{staticClass:"input-with-count"},[n("wbs-description-format",{staticClass:"wbs-input-textarea",attrs:{cnf:{dropdownItems:t.cnf.titleVariables},opt:t.tdk[2]},on:{change:t.desc_handler}})],1),n("p",{staticClass:"description"},[t._v("不超100个中文字符，建议50-100字为宜。")])])]),""!=t.tdk[0]||""!=t.tdk[2]?n("tr",[n("th",[t._v("预览")]),n("td",[n("div",{staticClass:"preview-box"},[n("div",{staticClass:"pvb-display"},[n("a",{staticClass:"preview-title"},[t._v(t._s(t.title_preview))]),n("p",{staticClass:"preview-desc"},[t._v(t._s(t.desc_preview))]),n("p",{staticClass:"preview-link"},[t._v(t._s(t.home_url("")))])]),n("div",{staticClass:"pvb-ft"},[t._v("* 搜索引擎收录结果展示预览")])])])]):t._e()])])])},a=[],r=(n("62f9"),n("fc13"),n("9b5f"),n("3bae"),n("f566"),n("d447"),n("9cda")),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"wb-tags-ctrl"},[n("div",{staticClass:"tag-items"},t._l(t.taglist,(function(e,i){return t.taglist.length?n("div",{staticClass:"tag-item"},[n("span",{staticClass:"vam ib",domProps:{innerHTML:t._s(t.displayFormat(e))}}),n("a",{staticClass:"del",attrs:{"data-del-val":e},on:{click:function(e){return t.delItem(i)}}})]):t._e()})),0),n("input",{directives:[{name:"model",rawName:"v-model",value:t.cur_input,expression:"cur_input"}],staticClass:"wb-tag-input",attrs:{type:"text",placeholder:"输入选项值, 回车确认 *"},domProps:{value:t.cur_input},on:{keyup:t.wbTagInput,input:function(e){e.target.composing||(t.cur_input=e.target.value)}}})])},c=[],o=(n("5b12"),n("ea94"),n("4200"),n("bf2f"),{name:"wbsTags",props:{tags:String,format:String},data:function(){return{cur_input:"",taglist:[],keycode:null}},created:function(){this.taglist=this.tags?this.tags.split(","):[]},methods:{wbTagInput:function(t){var e=this,n=t.keyCode;13===n&&e.wbTagPush()},wbTagPush:function(t){var e=this;return""!=e.cur_input&&(e.taglist.indexOf(e.cur_input.trim())>-1?(wbui.toast("已存在"),e.cur_input="",!1):(e.taglist.push(e.cur_input),e.$emit("set-tags",e.taglist.join(",")),e.cur_input="",!1))},delItem:function(t){var e=this;wbui.confirm("确认删除该选项？",(function(){e.taglist.splice(t,1),e.$emit("set-tags",e.taglist.join(",")),wbui.toast("已移除")}))},displayFormat:function(t){var e=t.split(":");return e.length>1?e[1]+'<em class="wk">(别名:'+e[0]+")</em>":t}},computed:{}}),l=o,u=n("5d22"),d=Object(u["a"])(l,s,c,!1,null,null,null),p=d.exports,f={name:"TdkSetter",props:{opt:{type:Array,value:[]},cnf:{type:Object,value:{separator:"",titleVariables:{},kwMode:0,post_type:""}}},components:{"wbs-title-format":r["a"],"wbs-kw-format":r["a"],"wbs-description-format":r["a"],"wbs-tags-module":p},data:function(){var t=this;return{tdk:t.opt||["","",""],title_preview:"",desc_preview:"",variables_keys_title:Object.keys(t.cnf.titleVariables)}},computed:{},created:function(){},mounted:function(){var t=this;t.title_preview=t.preview_handler(t.opt[0],t.cnf.titleVariables),t.desc_preview=t.preview_handler(t.opt[2],t.cnf.titleVariables)},methods:{title_handler:function(t){var e=this;e.tdk[0]=t,e.title_preview=e.preview_handler(t,e.cnf.titleVariables),e.$emit("change",e.tdk)},kw_handler:function(t){var e=this;t=t.replace(/(%\w+%)/g,",$1,"),t=t.replace(/,,/g,","),t=t.replace(/^,/g,""),t=t.replace(/,$/gi,""),e.tdk[1]=t,e.$emit("change",e.tdk)},kw_cpt:function(t){var e=this;e.tdk[1]=t,e.$emit("change",e.tdk)},desc_handler:function(t){var e=this;e.tdk[2]=t,e.desc_preview=e.preview_handler(t,e.cnf.titleVariables),e.$emit("change",e.tdk)},preview_handler:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this,i=Object.keys(e);if(""==t)return"";if(i.forEach((function(n){if(t.indexOf(n)<0)return!1;t=t.replace(new RegExp(n,"g")," "+e[n]+" ")})),n.cnf.post_type){var a=n.cnf.post_type,r=wb_cnf.seo_demo||{post:{},page:{}},s=r[a]||{},c={"文章标题":"post_title","作者":"author_name","直属分类":"cat_name","父级分类":"parent_cat","标签":"post_tag","摘要":"description"};for(var o in c)t=t.replace(new RegExp(o,"g"),s[c[o]])}return t=t.replace(new RegExp("分隔符","g"),n.cnf.separator),t=t.replace(new RegExp("站点标题","g"),n.$cnf.site_info.site_title),t=t.replace(new RegExp("站点副标题","g"),n.$cnf.site_info.site_subtitle),t},home_url:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=this;return e.$cnf.home_url+t}},watch:{opt:{handler:function(t){var e=this;e.tdk=t}}}},v=f,_=Object(u["a"])(v,i,a,!1,null,null,null);e["a"]=_.exports},"6a8c":function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"83d4":function(t,e,n){var i=n("97f5"),a=n("721d");t.exports=function(t,e,n){var r,s;return a&&"function"==typeof(r=e.constructor)&&r!==n&&i(s=r.prototype)&&s!==n.prototype&&a(t,s),t}},"9cda":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"wp",staticClass:"wbs-tag-format"},[t.cnf.variableOnly?t._e():n("span",{staticClass:"el-dropdown-link",on:{click:function(e){return e.stopPropagation(),t.inset_item()}}},[n("i",{staticClass:"el-icon-circle-plus el-icon--right"}),t._v(" "),n("span",{staticClass:"label-inset-var"},[t._v("插入变量")])]),n("div",{staticClass:"input-box",class:{"is-focus":t.isFocus}},[t.cnf.variableOnly?n("div",[t._l(t.item_list,(function(e,i){return n("tag-variable-item",{key:i,ref:"tagItem",refInFor:!0,attrs:{opt:e,cnf:t.cnf},on:{del:function(e){return t.del_item(i,e)}}})})),n("span",{staticClass:"input-item-btn",on:{click:function(e){return e.stopPropagation(),t.inset_tag()}}},[n("i",{staticClass:"el-icon-circle-plus el-icon--right"}),t._v(" "),n("span",{staticClass:"label-inset-var"},[t._v("插入变量")])])],2):n("div",t._l(t.item_list,(function(e,i){return n("tag-item",{key:i,ref:"tagItem",refInFor:!0,class:{"last-item":i==t.items.length-1},attrs:{opt:e,cnf:t.cnf},on:{focus:function(e){return t.get_focus(i)},blur:t.blur_handler,change:function(e){return t.tag_change(i,e)},add:function(e){return t.inset_item(i)},del:function(e){return t.del_item(i,e)},"active-next":function(e){return t.active_next(i,e)}}})})),1),n("ul",{directives:[{name:"show",rawName:"v-show",value:t.dropdown_active,expression:"dropdown_active"}],ref:"dropdownList",staticClass:"el-dropdown-menu el-popper"},t._l(t.cnf.dropdownItems,(function(e,i){return n("li",{key:i,staticClass:"el-dropdown-menu__item",on:{click:function(n){return t.select_dropdown_value(e,i)}}},[t._v(t._s(e))])})),0),t.cnf.variableOnly?t._e():n("div",{staticClass:"inner-mask",on:{click:t.focus_wp}})])])},a=[],r=(n("fc13"),n("9b5f"),n("62f9"),n("3bae"),n("ea94"),n("bf2f"),n("5b12"),n("5d08"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ib input-item",class:t.locked?"tag-ib":"",on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"])?null:t.del_tag_ib(e)},input:t.tag_wp_input,click:function(e){return e.stopPropagation(),t.$emit("focus")}}},[n("span",{directives:[{name:"show",rawName:"v-show",value:t.locked,expression:"locked"}],ref:"displayValue",staticClass:"display-value",on:{click:t.select}},[t._v(t._s(t.opt.name))]),t.locked?t._e():n("span",{staticClass:"between-tag-input",attrs:{contenteditable:"true"},domProps:{innerHTML:t._s(t.opt.value)},on:{blur:function(e){return t.input_action(e)},focus:function(e){return t.$emit("focus")},input:function(e){return t.div_input(e)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"])?null:t.div_keydown(e)},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.div_enter(e)}}})])}),s=[],c={name:"comTagItem",props:{opt:""},data:function(){var t=this;return{tag_ib_html:"",value:t.opt.value,del_action:0}},created:function(){},mounted:function(){var t=this;t.tag_ib_html=t.$refs.displayValue.outerHTML},methods:{input_action:function(t){var e=this,n=t.target.innerText;e.opt.value=n,e.$emit("change",{name:n,value:n,type:0}),e.$emit("blur",n)},div_keydown:function(t){var e=this,n=e.value;""===n&&(e.del_action>0?(e.$emit("del",-1),e.del_action=0):(e.del_action++,e.$emit("change",{name:"",value:"",type:0})))},div_enter:function(t){return t.preventDefault(),!1},div_input:function(t){var e=this,n=t.target.innerText;if("%"==n)return e.$emit("add",!0),!1;n.replace(/%/,"&#x25;"),e.value=t.target.innerText},tag_wp_input:function(t){var e=this;e.locked&&(t.target.innerHTML=e.tag_ib_html,e.$emit("active-next",t.data))},select:function(t){var e=window.getSelection(),n=document.createRange();e.removeAllRanges(),n.selectNodeContents(t.currentTarget),e.addRange(n)},del_tag_ib:function(t){this.$emit("del",0)}},computed:{locked:function(){return this.opt.type}}},o=c,l=n("5d22"),u=Object(l["a"])(o,r,s,!1,null,null,null),d=u.exports,p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ib tag-item",class:t.locked?"tag-ib":"",on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"])?null:t.del_tag_ib(e)},input:t.tag_wp_input,click:function(e){return e.stopPropagation(),t.$emit("focus")}}},[n("span",{directives:[{name:"show",rawName:"v-show",value:t.locked,expression:"locked"}],ref:"displayValue",staticClass:"display-value",on:{click:t.select}},[t._v(t._s(t.opt.name))]),n("i",{staticClass:"del",on:{click:t.del_tag_ib}}),t.locked?t._e():n("span",{staticClass:"between-tag-readonly",domProps:{innerHTML:t._s(t.opt.value)},on:{blur:function(e){return t.input_action(e)},focus:function(e){return t.$emit("focus")},input:function(e){return t.div_input(e)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"])?null:t.div_keydown(e)},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.div_enter(e)}}})])},f=[],v={name:"comTagItemVariableOnly",props:{opt:""},data:function(){var t=this;return{tag_ib_html:"",value:t.opt.value,del_action:0}},created:function(){},mounted:function(){var t=this;t.tag_ib_html=t.$refs.displayValue.outerHTML},methods:{input_action:function(t){var e=this,n=t.target.innerText;e.opt.value=n,e.$emit("change",{name:n,value:n,type:0}),e.$emit("blur",n)},div_keydown:function(t){var e=this,n=e.value;""===n&&(e.del_action>0?(e.$emit("del",-1),e.del_action=0):(e.del_action++,e.$emit("change",{name:"",value:"",type:0})))},div_enter:function(t){return t.preventDefault(),!1},div_input:function(t){var e=this,n=t.target.innerText;if("%"==n)return e.$emit("add",!0),!1;n.replace(/%/,"&#x25;"),e.value=t.target.innerText},tag_wp_input:function(t){var e=this;e.locked&&(t.target.innerHTML=e.tag_ib_html,e.$emit("active-next",t.data))},select:function(t){var e=window.getSelection(),n=document.createRange();e.removeAllRanges(),n.selectNodeContents(t.currentTarget),e.addRange(n)},del_tag_ib:function(t){this.$emit("del",0)}},computed:{locked:function(){return this.opt.type}}},_=v,m=Object(l["a"])(_,p,f,!1,null,null,null),g=m.exports,h={name:"WBTagFormat",props:{opt:String,cnf:{type:Object,value:{dropdownItems:{},variableOnly:!1}}},components:{"tag-item":d,"tag-variable-item":g},data:function(){var t,e=this;return t=e.cnf.variableOnly?e.opt.replace(/,/g,""):e.opt,{empty_item:{name:"",value:"",type:0},cur_value:t,cur_index:0,had_add:0,dropdown_active:0,isFocus:0,cnf_keys:Object.keys(e.cnf.dropdownItems),item_list:[]}},created:function(){},mounted:function(){var t=this;t.$nextTick((function(){t.cur_index=t.item_list.length-1})),document.addEventListener("click",(function(e){t.dropdown_active&&t.hide_dropdown()}))},methods:{tag_change:function(t,e){var n=this,i=n.items,a="";null!=e&&(i[t]=e.value,i.forEach((function(t,e,n){var i=t.trim();i&&(a+=i)})),n.cur_value=a)},inset_item:function(t){var e=this,n=null!=t?t:e.cur_index;""!==e.item_list[n].value&&(n+=1,e.items.splice(n,0,"%"),e.item_list.splice(n,0,e.empty_item),e.cur_index=n),e.item_list[n].value="%",e.active_dropdown(n)},inset_tag:function(t){var e=this,n=null!=t?t:e.cur_index;e.item_list[n].value="",e.active_dropdown(n)},del_item:function(t,e){var n=this,i="",a=n.items,r=t+e;r=r>=0?r:0,n.item_list[r].type&&(a.forEach((function(t,e){r!==e&&(i+=t)})),n.cur_value=i,n.cur_index=r-1,n.set_focus(r))},active_dropdown:function(t){var e=this,n=null!==t?t:e.cur_index,i=e.$refs.tagItem.length-1,a=n>i?i:n,r=e.$refs.tagItem[a].$el.offsetLeft;e.dropdown_active=!0,e.$refs.dropdownList.style.left=r+"px",e.$refs.wp.classList.add("active-dropdown")},hide_dropdown:function(){var t=this;t.dropdown_active=!1,t.$refs.dropdownList.style.left="",t.$refs.wp.classList.remove("active-dropdown")},select_dropdown_value:function(t,e){var n=this,i="",a=n.items,r=n.cur_index;a[r]=e,a.forEach((function(t,e){i+=t})),n.cur_value=i,n.hide_dropdown(),n.$nextTick((function(){var t=n.items.length;n.cur_index=t-1,n.set_focus(t)}))},active_next:function(t,e){var n=this,i=t+1,a=n.$refs.tagItem[i].$el.querySelector(".between-tag-input"),r=a.innerText;a.innerText=e+r,a.focus();var s=window.getSelection();s.removeAllRanges();var c=document.createRange();c.setStart(a,1),s.addRange(c)},set_focus:function(t){var e=this,n=t>1?t-1:0,i=e.$refs.tagItem[n].$el,a=i.querySelector(".between-tag-input"),r=window.getSelection(),s=document.createRange();if(a){var c=a.innerText.length,o=c?a.firstChild:a;r.removeAllRanges(),s.setStart(o,c),s.setEnd(o,c)}else{var l=i.querySelector(".display-value");r.removeAllRanges(),l&&s.selectNode(l)}return r.addRange(s),!1},get_focus:function(t){this.cur_index=t,this.isFocus=!0},focus_wp:function(){var t=this,e=t.$refs.tagItem.length;t.cur_index=e-1,t.set_focus(e),t.isFocus=!0},blur_handler:function(t){var e=this;e.isFocus=!1}},computed:{items:function(){var t=this,e=t.cur_value;return e?(t.cnf.variableOnly&&(e=e.replace(/,/g,"")),e=e.replace(/(%\w+%)/g,"##$1##"),e=e.replace(/^##/g,""),e.split("##")):[]}},watch:{cur_value:{handler:function(t){var e=this,n=e.cnf.variableOnly?t.replace(/,/g,""):t,i=n;i=i.replace(/(%\w+%)/g,"##$1##"),i=i.replace(/^##/g,"");var a=[{name:"",value:"",type:0}],r=n?i.split("##"):[];r.forEach((function(t,n){var i=e.cnf_keys.indexOf(t)>-1?1:0;a[n]={name:i?e.cnf.dropdownItems[t]:t,value:t,type:i}})),a.slice(-1)[0].type&&a.push(e.empty_item),e.item_list=a,e.$emit("change",n)},immediate:!0},opt:{handler:function(t){var e=this;e.cur_value=t}}}},w=h,b=Object(l["a"])(w,i,a,!1,null,null,null);e["a"]=b.exports},ea94:function(t,e,n){"use strict";var i=n("1f04"),a=n("f8d5").trim,r=n("ed58");i({target:"String",proto:!0,forced:r("trim")},{trim:function(){return a(this)}})},ed58:function(t,e,n){var i=n("7ce6"),a=n("6a8c"),r="​᠎";t.exports=function(t){return i((function(){return!!a[t]()||r[t]()!=r||a[t].name!==t}))}},f566:function(t,e,n){var i=n("8fe5"),a=n("f14a"),r=n("dd95"),s=n("83d4"),c=n("d320").f,o=n("a34a").f,l=n("d192"),u=n("2e38"),d=n("08b5"),p=n("bbee"),f=n("7ce6"),v=n("28d0").set,_=n("24a1"),m=n("3086"),g=m("match"),h=a.RegExp,w=h.prototype,b=/a/g,k=/a/g,y=new h(b)!==b,x=d.UNSUPPORTED_Y,$=i&&r("RegExp",!y||x||f((function(){return k[g]=!1,h(b)!=b||h(k)==k||"/a/i"!=h(b,"i")})));if($){var C=function(t,e){var n,i=this instanceof C,a=l(t),r=void 0===e;if(!i&&a&&t.constructor===C&&r)return t;y?a&&!r&&(t=t.source):t instanceof C&&(r&&(e=u.call(t)),t=t.source),x&&(n=!!e&&e.indexOf("y")>-1,n&&(e=e.replace(/y/g,"")));var c=s(y?new h(t,e):h(t,e),i?this:w,C);return x&&n&&v(c,{sticky:n}),c},O=function(t){t in C||c(C,t,{configurable:!0,get:function(){return h[t]},set:function(e){h[t]=e}})},T=o(h),E=0;while(T.length>E)O(T[E++]);w.constructor=C,C.prototype=w,p(a,"RegExp",C)}_("RegExp")},f8d5:function(t,e,n){var i=n("4023"),a=n("6a8c"),r="["+a+"]",s=RegExp("^"+r+r+"*"),c=RegExp(r+r+"*$"),o=function(t){return function(e){var n=String(i(e));return 1&t&&(n=n.replace(s,"")),2&t&&(n=n.replace(c,"")),n}};t.exports={start:o(1),end:o(2),trim:o(3)}}}]);