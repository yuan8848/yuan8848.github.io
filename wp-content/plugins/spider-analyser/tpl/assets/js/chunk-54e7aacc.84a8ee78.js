(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-54e7aacc"],{"498a":function(t,e,a){"use strict";var o=a("23e7"),n=a("58a8").trim,i=a("c8d2");o({target:"String",proto:!0,forced:i("trim")},{trim:function(){return n(this)}})},6514:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wbs-content"},[a("div",{staticClass:"wbs-main"},[t.isLoaded?a("table",{staticClass:"wbs-form-table"},[a("tr",[a("th",{staticClass:"row w8em"},[t._v(" 保留周期 "),a("wbs-tooltip",{attrs:{"data-msg":t.tooltips.log_keep}})],1),a("td",[a("div",{staticClass:"selector-bar"},t._l(t.log_keep,(function(e,o){return a("label",{key:o},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.opt.log_keep,expression:"opt.log_keep"}],attrs:{type:"radio"},domProps:{value:o,checked:t._q(t.opt.log_keep,o)},on:{change:function(e){return t.$set(t.opt,"log_keep",o)}}}),a("span",[t._v(t._s(e))])])})),0)])]),a("tr",[a("th",{staticClass:"row"},[t._v(" 日志记录 "),a("wbs-tooltip",{attrs:{"data-msg":t.tooltips.log_info}})],1),a("td",{staticClass:"info"},[t._v(" 当前日志共"+t._s(t.logStat.num)+"行"),t.logStat.updated?a("span",[t._v("（"+t._s(t.logStat.updated)+" 更新）")]):t._e()])]),a("tr",[a("th",{staticClass:"row"},[t._v(" 更新方式 "),a("wbs-tooltip",{attrs:{"data-msg":t.tooltips.update_info}})],1),a("td",[a("div",{staticClass:"selector-bar"},t._l({db:"即时更新",hour:"每小时更新（推荐默认项）",day:"每天更新"},(function(e,o){return a("label",{key:o},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.opt.log_update,expression:"opt.log_update"}],attrs:{type:"radio"},domProps:{value:o,checked:t._q(t.opt.log_update,o)},on:{change:function(e){return t.$set(t.opt,"log_update",o)}}}),a("span",[t._v(t._s(e))])])})),0)])]),a("tr",[a("th",{staticClass:"row"},[t._v(" 备份与删除 "),a("wbs-tooltip",{attrs:{"data-msg":t.tooltips.del_backup}})],1),a("td",{staticClass:"info"},[a("label",[a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(e){return t.down_log()}}},[t._v("日志备份")])],1),a("label",{staticClass:"ml"},[a("el-button",{attrs:{type:"danger",size:"mini",plain:""},on:{click:function(e){return t.del_spider_log()}}},[t._v("日志删除")])],1)])]),a("tr",[a("th",{staticClass:"row"},[t._v(" 自定义蜘蛛 "),a("wbs-tooltip",{staticClass:"on-top",attrs:{"data-msg":t.tooltips.custom_spider}})],1),a("td",[a("wbs-custom-spider",{attrs:{items:t.opt.user_define,mode:1,placeholder:"蜘蛛名称"},on:{"set-tags":function(e){t.opt.user_define=e}}})],1)])]):t._e()]),t.$cnf.is_pro?t._e():a("wbs-more-sources"),a("wbs-ctrl-bar",{on:{submit:t.update_data}})],1)},n=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{class:t.mode?"wb-tags-mode-b":"wb-tags-ctrl"},[t.mode?a("div",{staticClass:"wb-tags-input-box"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.cur_input,expression:"cur_input"}],staticClass:"wbs-input wbs-input-short",attrs:{type:"text",placeholder:t.placeholder},domProps:{value:t.cur_input},on:{keyup:t.wbTagInput,input:function(e){e.target.composing||(t.cur_input=e.target.value)}}}),a("a",{staticClass:"ml link",on:{click:t.wbTagPush}},[t._v("添加 +")])]):a("input",{directives:[{name:"model",rawName:"v-model",value:t.cur_input,expression:"cur_input"}],staticClass:"wb-tag-input",attrs:{type:"text",placeholder:t.placeholder},domProps:{value:t.cur_input},on:{keyup:t.wbTagInput,input:function(e){e.target.composing||(t.cur_input=e.target.value)}}}),t.items.length?a("div",{staticClass:"tag-items"},t._l(t.items,(function(e,o){return a("div",{key:o,staticClass:"tag-item"},[a("span",{staticClass:"vam ib",domProps:{innerHTML:t._s(t.displayFormat(e))}}),a("a",{staticClass:"del",attrs:{"data-del-val":e},on:{click:function(e){return t.delItem(o)}}})])})),0):t._e()])},s=[],r=(a("a9e3"),a("ac1f"),a("5319"),a("c975"),a("498a"),a("a434"),{name:"wbsCustomSpider",props:{items:Array,mode:Number,placeholder:String},data:function(){return{cur_input:"",taglist:[],keycode:null}},template:"#wbs_tpl_custom_spider",created:function(){this.taglist=this.items?this.items:[]},methods:{wbTagInput:function(t){var e=this,a=t.keyCode;188===a&&(e.cur_input=e.cur_input.replace(/(^,)|(,$)/,"")),13===a&&(e.wbTagPush(),event.stopPropagation())},wbTagPush:function(t){var e=this;return""!=e.cur_input&&(e.taglist.indexOf(e.cur_input.trim())>-1?(e.$wbui.toast("已存在"),e.cur_input="",!1):(e.taglist.push(e.cur_input),e.$emit("set-tags",e.taglist),e.cur_input="",!1))},delItem:function(t){var e=this;e.$wbui.confirm("确认删除？",(function(){e.taglist.splice(t,1),e.$emit("set-tags",e.taglist),e.$wbui.toast("已移除")}))},displayFormat:function(t){return t}}}),c=r,u=a("2877"),l=Object(u["a"])(c,i,s,!1,null,null,null),p=l.exports,d={name:"SettingLog",components:{"wbs-custom-spider":p},data:function(){var t=this;return{form_changed:0,isLoaded:0,is_pro:t.$cnf.is_pro,opt:{user_define:[],log_keep:"",log_update:"day"},logStat:{num:0,updated:""},log_keep:{1:"近7天",2:"最近30天",3:"最近3个月",6:"最近6个月",12:"最近1年",120:"永久保留"},tooltips:{del_backup:"如历史日志体积过大，可以考虑备份与删除日志。",log_keep:"如蜘蛛日志过大导致数据库访问性能下降，建议选择保留周期为最近30天。",custom_spider:"可添加插件未记录的蜘蛛日志，请准确填写蜘蛛名称。",log_info:"站长可以根据日志记录行数判断蜘蛛日志是否太大，以作出日志备份或者删除操作，降低数据库压力。",update_info:"站长可以根据网站的蜘蛛爬取压力，选择蜘蛛日志更新方式，推荐使用默认选项-每小时更新。"}}},created:function(){this.load_data()},methods:{down_log:function(){var t=this;window.open(ajaxurl+"?action="+t.$cnf.action.act+"&op=down_log","down_log")},del_spider_log:function(){var t=this;t.$wbui.confirm("删除日志操作，将会永久性删除所有蜘蛛历史数据。请谨慎操作！",(function(){t.$api.saveData({action:t.$cnf.action.act,op:"clean_log"}).then((function(e){t.$wbui.toast("删除成功",(function(){location.reload()}))}))}))},load_data:function(){var t=this;t.log_loading=t.$wbui.loading(),t.$api.getData({action:t.$cnf.action.act,tab:"log",op:"get_setting"}).then((function(e){t.opt.user_define=e["data"]["user_define"],t.opt.log_keep=e["data"]["log_keep"],t.opt.log_update=e["data"]["log_update"],t.logStat=e["data"]["logStat"],t.$wbui.close(t.log_loading),t.isLoaded=1}))},update_data:function(t){var e=this,a={action:e.$cnf.action.act,op:"update_setting",tab:"log",opt:e.opt};e.$api.saveData(a).then((function(a){e.$wbui.toast("设置保存成功"),e.form_changed=1,t&&t()}))}},watch:{opt:{handler:function(){this.form_changed++},deep:!0}},beforeRouteLeave:function(t,e,a){var o=this;o.form_changed>1?o.$wbui.open({content:"您修改的设置尚未保存，确定离开此页面吗？",btn:["保存并离开","放弃修改"],yes:function(){return a(!1),o.update_data((function(){a()})),!1},no:function(){return a(),!1}}):a()}},_=d,g=Object(u["a"])(_,o,n,!1,null,null,null);e["default"]=g.exports},7156:function(t,e,a){var o=a("861d"),n=a("d2bb");t.exports=function(t,e,a){var i,s;return n&&"function"==typeof(i=e.constructor)&&i!==a&&o(s=i.prototype)&&s!==a.prototype&&n(t,s),t}},a9e3:function(t,e,a){"use strict";var o=a("83ab"),n=a("da84"),i=a("94ca"),s=a("6eeb"),r=a("5135"),c=a("c6b6"),u=a("7156"),l=a("c04e"),p=a("d039"),d=a("7c73"),_=a("241c").f,g=a("06cf").f,f=a("9bf2").f,m=a("58a8").trim,b="Number",v=n[b],h=v.prototype,w=c(d(h))==b,k=function(t){var e,a,o,n,i,s,r,c,u=l(t,!1);if("string"==typeof u&&u.length>2)if(u=m(u),e=u.charCodeAt(0),43===e||45===e){if(a=u.charCodeAt(2),88===a||120===a)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:o=2,n=49;break;case 79:case 111:o=8,n=55;break;default:return+u}for(i=u.slice(2),s=i.length,r=0;r<s;r++)if(c=i.charCodeAt(r),c<48||c>n)return NaN;return parseInt(i,o)}return+u};if(i(b,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var C,y=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof y&&(w?p((function(){h.valueOf.call(a)})):c(a)!=b)?u(new v(k(e)),a,y):k(e)},$=o?_(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),I=0;$.length>I;I++)r(v,C=$[I])&&!r(y,C)&&f(y,C,g(v,C));y.prototype=h,h.constructor=y,s(n,b,y)}},c8d2:function(t,e,a){var o=a("d039"),n=a("5899"),i="​᠎";t.exports=function(t){return o((function(){return!!n[t]()||i[t]()!=i||n[t].name!==t}))}}}]);